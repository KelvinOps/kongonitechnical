{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Works/Kongoni%20website/kongonitechnical/shared/schema.tsx"],"sourcesContent":["import { z } from \"zod\";\r\n\r\n//\r\n// ✅ Department Schema & Type\r\n//\r\nexport const departmentSchema = z.object({\r\n  id: z.string().min(1, \"Department ID is required\"),\r\n  name: z.string().min(1, \"Department name is required\").min(2, \"Department name must be at least 2 characters\"),\r\n  description: z.string().min(1, \"Department description is required\").min(10, \"Description must be at least 10 characters\"),\r\n  imageUrl: z.string().url(\"Please enter a valid image URL\")\r\n});\r\n\r\nexport type Department = z.infer<typeof departmentSchema>;\r\n\r\n//\r\n// ✅ Course Schema & Type\r\n//\r\nexport const courseSchema = z.object({\r\n  id: z.string().min(1, \"Course ID is required\"),\r\n  title: z.string().min(1, \"Course title is required\").min(2, \"Course title must be at least 2 characters\"),\r\n  description: z.string().min(1, \"Course description is required\").min(10, \"Description must be at least 10 characters\"),\r\n  duration: z.string().min(1, \"Course duration is required\")\r\n});\r\n\r\nexport type Course = z.infer<typeof courseSchema>;\r\n\r\n//\r\n// ✅ Application Form Schema & Type\r\n//\r\nexport const insertApplicationSchema = z.object({\r\n  firstName: z.string()\r\n    .min(1, \"First name is required\")\r\n    .min(2, \"First name must be at least 2 characters\")\r\n    .max(50, \"First name must be less than 50 characters\")\r\n    .regex(/^[a-zA-Z\\s'-]+$/, \"First name can only contain letters, spaces, hyphens, and apostrophes\"),\r\n  \r\n  lastName: z.string()\r\n    .min(1, \"Last name is required\")\r\n    .min(2, \"Last name must be at least 2 characters\")\r\n    .max(50, \"Last name must be less than 50 characters\")\r\n    .regex(/^[a-zA-Z\\s'-]+$/, \"Last name can only contain letters, spaces, hyphens, and apostrophes\"),\r\n  \r\n  email: z.string()\r\n    .min(1, \"Email is required\")\r\n    .email(\"Please enter a valid email address\")\r\n    .max(100, \"Email must be less than 100 characters\")\r\n    .toLowerCase(),\r\n  \r\n  phone: z.string()\r\n    .min(1, \"Phone number is required\")\r\n    .regex(/^(\\+254|0)[17]\\d{8}$/, \"Please enter a valid Kenyan phone number (e.g., +254712345678 or 0712345678)\")\r\n    .transform((val) => {\r\n      // Normalize phone number format\r\n      if (val.startsWith('0')) {\r\n        return '+254' + val.slice(1);\r\n      }\r\n      return val;\r\n    }),\r\n  \r\n  program: z.string().min(1, \"Please select a program\"),\r\n  department: z.string().min(1, \"Please select a department\"),\r\n  education: z.string().min(1, \"Please select your educational background\"),\r\n  \r\n  additionalInfo: z.string()\r\n    .max(500, \"Additional information must be less than 500 characters\")\r\n    .optional(),\r\n  \r\n  agreesToTerms: z.boolean().refine(val => val === true, {\r\n    message: \"You must agree to the terms and conditions\"\r\n  }),\r\n  \r\n  // Optional fields for enhanced functionality\r\n  dateOfBirth: z.string()\r\n    .optional()\r\n    .refine((val) => {\r\n      if (!val) return true;\r\n      const date = new Date(val);\r\n      const now = new Date();\r\n      const age = now.getFullYear() - date.getFullYear();\r\n      return age >= 16 && age <= 65;\r\n    }, \"You must be between 16 and 65 years old\"),\r\n  \r\n  gender: z.enum([\"male\", \"female\", \"other\", \"prefer-not-to-say\"]).optional(),\r\n  \r\n  county: z.string().optional(),\r\n  \r\n  emergencyContact: z.object({\r\n    name: z.string().optional(),\r\n    phone: z.string().optional(),\r\n    relationship: z.string().optional()\r\n  }).optional()\r\n});\r\n\r\nexport type InsertApplication = z.infer<typeof insertApplicationSchema>;\r\n\r\n//\r\n// ✅ Contact Form Schema & Type (Enhanced)\r\n//\r\nexport const insertContactSchema = z.object({\r\n  name: z.string()\r\n    .min(1, \"Name is required\")\r\n    .min(2, \"Name must be at least 2 characters\")\r\n    .max(100, \"Name must be less than 100 characters\")\r\n    .regex(/^[a-zA-Z\\s'-]+$/, \"Name can only contain letters, spaces, hyphens, and apostrophes\"),\r\n  \r\n  email: z.string()\r\n    .min(1, \"Email is required\")\r\n    .email(\"Please enter a valid email address\")\r\n    .max(100, \"Email must be less than 100 characters\")\r\n    .toLowerCase(),\r\n  \r\n  subject: z.string()\r\n    .min(1, \"Subject is required\")\r\n    .min(3, \"Subject must be at least 3 characters\")\r\n    .max(200, \"Subject must be less than 200 characters\"),\r\n  \r\n  message: z.string()\r\n    .min(1, \"Message is required\")\r\n    .min(10, \"Message must be at least 10 characters\")\r\n    .max(1000, \"Message must be less than 1000 characters\"),\r\n  \r\n  // Optional phone number for contact form\r\n  phone: z.string()\r\n    .optional()\r\n    .refine((val) => {\r\n      if (!val) return true;\r\n      return /^(\\+254|0)[17]\\d{8}$/.test(val);\r\n    }, \"Please enter a valid Kenyan phone number\"),\r\n  \r\n  // Contact type for better categorization\r\n  contactType: z.enum([\r\n    \"general-inquiry\",\r\n    \"admissions\",\r\n    \"academic-info\",\r\n    \"technical-support\",\r\n    \"complaints\",\r\n    \"suggestions\",\r\n    \"other\"\r\n  ]).default(\"general-inquiry\"),\r\n  \r\n  // Whether the user wants to receive updates\r\n  subscribesToUpdates: z.boolean().default(false)\r\n});\r\n\r\nexport type InsertContact = z.infer<typeof insertContactSchema>;\r\n\r\n//\r\n// ✅ Newsletter Subscription Schema\r\n//\r\nexport const newsletterSubscriptionSchema = z.object({\r\n  email: z.string()\r\n    .min(1, \"Email is required\")\r\n    .email(\"Please enter a valid email address\")\r\n    .max(100, \"Email must be less than 100 characters\")\r\n    .toLowerCase(),\r\n  \r\n  name: z.string()\r\n    .min(1, \"Name is required\")\r\n    .min(2, \"Name must be at least 2 characters\")\r\n    .max(100, \"Name must be less than 100 characters\")\r\n    .optional(),\r\n  \r\n  interests: z.array(z.string()).default([])\r\n});\r\n\r\nexport type NewsletterSubscription = z.infer<typeof newsletterSubscriptionSchema>;\r\n\r\n//\r\n// ✅ Dropdown Options (Enhanced)\r\n//\r\nexport const programOptions = [\r\n  { value: \"diploma-mechanical\", label: \"Diploma in Mechanical Engineering\", department: \"engineering\" },\r\n  { value: \"diploma-it\", label: \"Diploma in Information Technology\", department: \"ict\" },\r\n  { value: \"diploma-business\", label: \"Diploma in Business Management\", department: \"business\" },\r\n  { value: \"diploma-electrical\", label: \"Diploma in Electrical Engineering\", department: \"engineering\" },\r\n  { value: \"diploma-hotel\", label: \"Diploma in Hotel Management\", department: \"hospitality\" },\r\n  { value: \"diploma-nursing\", label: \"Diploma in Nursing\", department: \"health\" },\r\n  { value: \"cert-automotive\", label: \"Certificate in Motor Vehicle Mechanics\", department: \"engineering\" },\r\n  { value: \"cert-computer\", label: \"Certificate in Computer Applications\", department: \"ict\" },\r\n  { value: \"cert-carpentry\", label: \"Carpentry & Joinery\", department: \"engineering\" },\r\n  { value: \"cert-fashion\", label: \"Certificate in Fashion & Design\", department: \"fashion\" },\r\n  { value: \"cert-agriculture\", label: \"Certificate in Agriculture\", department: \"agriculture\" },\r\n  { value: \"cert-beauty\", label: \"Certificate in Beauty & Cosmetology\", department: \"fashion\" }\r\n] as const;\r\n\r\nexport const educationOptions = [\r\n  { value: \"kcpe\", label: \"KCPE Certificate\", level: 1 },\r\n  { value: \"kcse\", label: \"KCSE Certificate\", level: 2 },\r\n  { value: \"certificate\", label: \"Certificate Course\", level: 3 },\r\n  { value: \"diploma\", label: \"Diploma\", level: 4 },\r\n  { value: \"degree\", label: \"University Degree\", level: 5 },\r\n  { value: \"postgraduate\", label: \"Postgraduate\", level: 6 },\r\n  { value: \"other\", label: \"Other\", level: 0 }\r\n] as const;\r\n\r\nexport const departmentOptions = [\r\n  { value: \"engineering\", label: \"Engineering Department\", description: \"Mechanical, Electrical & Automotive Engineering\" },\r\n  { value: \"ict\", label: \"ICT Department\", description: \"Information Technology & Computer Sciences\" },\r\n  { value: \"business\", label: \"Business Department\", description: \"Business Management & Entrepreneurship\" },\r\n  { value: \"hospitality\", label: \"Hospitality Department\", description: \"Hotel Management & Tourism\" },\r\n  { value: \"health\", label: \"Health Sciences Department\", description: \"Nursing & Health Related Courses\" },\r\n  { value: \"agriculture\", label: \"Agriculture Department\", description: \"Agricultural Sciences & Technology\" },\r\n  { value: \"fashion\", label: \"Fashion & Design Department\", description: \"Fashion Design & Beauty Therapy\" }\r\n] as const;\r\n\r\nexport const contactTypeOptions = [\r\n  { value: \"general-inquiry\", label: \"General Inquiry\" },\r\n  { value: \"admissions\", label: \"Admissions Information\" },\r\n  { value: \"academic-info\", label: \"Academic Information\" },\r\n  { value: \"technical-support\", label: \"Technical Support\" },\r\n  { value: \"complaints\", label: \"Complaints\" },\r\n  { value: \"suggestions\", label: \"Suggestions\" },\r\n  { value: \"other\", label: \"Other\" }\r\n] as const;\r\n\r\nexport const kenyanCounties = [\r\n  \"Baringo\", \"Bomet\", \"Bungoma\", \"Busia\", \"Elgeyo-Marakwet\", \"Embu\", \"Garissa\",\r\n  \"Homa Bay\", \"Isiolo\", \"Kajiado\", \"Kakamega\", \"Kericho\", \"Kiambu\", \"Kilifi\",\r\n  \"Kirinyaga\", \"Kisii\", \"Kisumu\", \"Kitui\", \"Kwale\", \"Laikipia\", \"Lamu\", \"Machakos\",\r\n  \"Makueni\", \"Mandera\", \"Marsabit\", \"Meru\", \"Migori\", \"Mombasa\", \"Murang'a\",\r\n  \"Nairobi\", \"Nakuru\", \"Nandi\", \"Narok\", \"Nyamira\", \"Nyandarua\", \"Nyeri\",\r\n  \"Samburu\", \"Siaya\", \"Taita-Taveta\", \"Tana River\", \"Tharaka-Nithi\", \"Trans Nzoia\",\r\n  \"Turkana\", \"Uasin Gishu\", \"Vihiga\", \"Wajir\", \"West Pokot\"\r\n] as const;\r\n\r\n//\r\n// ✅ Utility Functions\r\n//\r\nexport const getProgramsByDepartment = (department: string) => {\r\n  return programOptions.filter(program => program.department === department);\r\n};\r\n\r\nexport const getDepartmentByProgram = (programValue: string) => {\r\n  return programOptions.find(program => program.value === programValue)?.department;\r\n};\r\n\r\n//\r\n// ✅ Validation Helpers\r\n//\r\nexport const validateKenyanPhone = (phone: string): boolean => {\r\n  return /^(\\+254|0)[17]\\d{8}$/.test(phone);\r\n};\r\n\r\nexport const formatKenyanPhone = (phone: string): string => {\r\n  if (phone.startsWith('0')) {\r\n    return '+254' + phone.slice(1);\r\n  }\r\n  return phone;\r\n};"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAKO,MAAM,mBAAmB,+KAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACvC,IAAI,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACtB,MAAM,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,+BAA+B,GAAG,CAAC,GAAG;IAC9D,aAAa,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,sCAAsC,GAAG,CAAC,IAAI;IAC7E,UAAU,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3B;AAOO,MAAM,eAAe,+KAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnC,IAAI,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACtB,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,4BAA4B,GAAG,CAAC,GAAG;IAC5D,aAAa,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,kCAAkC,GAAG,CAAC,IAAI;IACzE,UAAU,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAOO,MAAM,0BAA0B,+KAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9C,WAAW,+KAAA,CAAA,IAAC,CAAC,MAAM,GAChB,GAAG,CAAC,GAAG,0BACP,GAAG,CAAC,GAAG,4CACP,GAAG,CAAC,IAAI,8CACR,KAAK,CAAC,mBAAmB;IAE5B,UAAU,+KAAA,CAAA,IAAC,CAAC,MAAM,GACf,GAAG,CAAC,GAAG,yBACP,GAAG,CAAC,GAAG,2CACP,GAAG,CAAC,IAAI,6CACR,KAAK,CAAC,mBAAmB;IAE5B,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GACZ,GAAG,CAAC,GAAG,qBACP,KAAK,CAAC,sCACN,GAAG,CAAC,KAAK,0CACT,WAAW;IAEd,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GACZ,GAAG,CAAC,GAAG,4BACP,KAAK,CAAC,wBAAwB,gFAC9B,SAAS,CAAC,CAAC;QACV,gCAAgC;QAChC,IAAI,IAAI,UAAU,CAAC,MAAM;YACvB,OAAO,SAAS,IAAI,KAAK,CAAC;QAC5B;QACA,OAAO;IACT;IAEF,SAAS,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,YAAY,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC9B,WAAW,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAE7B,gBAAgB,+KAAA,CAAA,IAAC,CAAC,MAAM,GACrB,GAAG,CAAC,KAAK,2DACT,QAAQ;IAEX,eAAe,+KAAA,CAAA,IAAC,CAAC,OAAO,GAAG,MAAM,CAAC,CAAA,MAAO,QAAQ,MAAM;QACrD,SAAS;IACX;IAEA,6CAA6C;IAC7C,aAAa,+KAAA,CAAA,IAAC,CAAC,MAAM,GAClB,QAAQ,GACR,MAAM,CAAC,CAAC;QACP,IAAI,CAAC,KAAK,OAAO;QACjB,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,MAAM,IAAI;QAChB,MAAM,MAAM,IAAI,WAAW,KAAK,KAAK,WAAW;QAChD,OAAO,OAAO,MAAM,OAAO;IAC7B,GAAG;IAEL,QAAQ,+KAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;QAAU;QAAS;KAAoB,EAAE,QAAQ;IAEzE,QAAQ,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAE3B,kBAAkB,+KAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACzB,MAAM,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QACzB,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;QAC1B,cAAc,+KAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACnC,GAAG,QAAQ;AACb;AAOO,MAAM,sBAAsB,+KAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1C,MAAM,+KAAA,CAAA,IAAC,CAAC,MAAM,GACX,GAAG,CAAC,GAAG,oBACP,GAAG,CAAC,GAAG,sCACP,GAAG,CAAC,KAAK,yCACT,KAAK,CAAC,mBAAmB;IAE5B,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GACZ,GAAG,CAAC,GAAG,qBACP,KAAK,CAAC,sCACN,GAAG,CAAC,KAAK,0CACT,WAAW;IAEd,SAAS,+KAAA,CAAA,IAAC,CAAC,MAAM,GACd,GAAG,CAAC,GAAG,uBACP,GAAG,CAAC,GAAG,yCACP,GAAG,CAAC,KAAK;IAEZ,SAAS,+KAAA,CAAA,IAAC,CAAC,MAAM,GACd,GAAG,CAAC,GAAG,uBACP,GAAG,CAAC,IAAI,0CACR,GAAG,CAAC,MAAM;IAEb,yCAAyC;IACzC,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GACZ,QAAQ,GACR,MAAM,CAAC,CAAC;QACP,IAAI,CAAC,KAAK,OAAO;QACjB,OAAO,uBAAuB,IAAI,CAAC;IACrC,GAAG;IAEL,yCAAyC;IACzC,aAAa,+KAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;KACD,EAAE,OAAO,CAAC;IAEX,4CAA4C;IAC5C,qBAAqB,+KAAA,CAAA,IAAC,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3C;AAOO,MAAM,+BAA+B,+KAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnD,OAAO,+KAAA,CAAA,IAAC,CAAC,MAAM,GACZ,GAAG,CAAC,GAAG,qBACP,KAAK,CAAC,sCACN,GAAG,CAAC,KAAK,0CACT,WAAW;IAEd,MAAM,+KAAA,CAAA,IAAC,CAAC,MAAM,GACX,GAAG,CAAC,GAAG,oBACP,GAAG,CAAC,GAAG,sCACP,GAAG,CAAC,KAAK,yCACT,QAAQ;IAEX,WAAW,+KAAA,CAAA,IAAC,CAAC,KAAK,CAAC,+KAAA,CAAA,IAAC,CAAC,MAAM,IAAI,OAAO,CAAC,EAAE;AAC3C;AAOO,MAAM,iBAAiB;IAC5B;QAAE,OAAO;QAAsB,OAAO;QAAqC,YAAY;IAAc;IACrG;QAAE,OAAO;QAAc,OAAO;QAAqC,YAAY;IAAM;IACrF;QAAE,OAAO;QAAoB,OAAO;QAAkC,YAAY;IAAW;IAC7F;QAAE,OAAO;QAAsB,OAAO;QAAqC,YAAY;IAAc;IACrG;QAAE,OAAO;QAAiB,OAAO;QAA+B,YAAY;IAAc;IAC1F;QAAE,OAAO;QAAmB,OAAO;QAAsB,YAAY;IAAS;IAC9E;QAAE,OAAO;QAAmB,OAAO;QAA0C,YAAY;IAAc;IACvG;QAAE,OAAO;QAAiB,OAAO;QAAwC,YAAY;IAAM;IAC3F;QAAE,OAAO;QAAkB,OAAO;QAAuB,YAAY;IAAc;IACnF;QAAE,OAAO;QAAgB,OAAO;QAAmC,YAAY;IAAU;IACzF;QAAE,OAAO;QAAoB,OAAO;QAA8B,YAAY;IAAc;IAC5F;QAAE,OAAO;QAAe,OAAO;QAAuC,YAAY;IAAU;CAC7F;AAEM,MAAM,mBAAmB;IAC9B;QAAE,OAAO;QAAQ,OAAO;QAAoB,OAAO;IAAE;IACrD;QAAE,OAAO;QAAQ,OAAO;QAAoB,OAAO;IAAE;IACrD;QAAE,OAAO;QAAe,OAAO;QAAsB,OAAO;IAAE;IAC9D;QAAE,OAAO;QAAW,OAAO;QAAW,OAAO;IAAE;IAC/C;QAAE,OAAO;QAAU,OAAO;QAAqB,OAAO;IAAE;IACxD;QAAE,OAAO;QAAgB,OAAO;QAAgB,OAAO;IAAE;IACzD;QAAE,OAAO;QAAS,OAAO;QAAS,OAAO;IAAE;CAC5C;AAEM,MAAM,oBAAoB;IAC/B;QAAE,OAAO;QAAe,OAAO;QAA0B,aAAa;IAAkD;IACxH;QAAE,OAAO;QAAO,OAAO;QAAkB,aAAa;IAA6C;IACnG;QAAE,OAAO;QAAY,OAAO;QAAuB,aAAa;IAAyC;IACzG;QAAE,OAAO;QAAe,OAAO;QAA0B,aAAa;IAA6B;IACnG;QAAE,OAAO;QAAU,OAAO;QAA8B,aAAa;IAAmC;IACxG;QAAE,OAAO;QAAe,OAAO;QAA0B,aAAa;IAAqC;IAC3G;QAAE,OAAO;QAAW,OAAO;QAA+B,aAAa;IAAkC;CAC1G;AAEM,MAAM,qBAAqB;IAChC;QAAE,OAAO;QAAmB,OAAO;IAAkB;IACrD;QAAE,OAAO;QAAc,OAAO;IAAyB;IACvD;QAAE,OAAO;QAAiB,OAAO;IAAuB;IACxD;QAAE,OAAO;QAAqB,OAAO;IAAoB;IACzD;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAe,OAAO;IAAc;IAC7C;QAAE,OAAO;QAAS,OAAO;IAAQ;CAClC;AAEM,MAAM,iBAAiB;IAC5B;IAAW;IAAS;IAAW;IAAS;IAAmB;IAAQ;IACnE;IAAY;IAAU;IAAW;IAAY;IAAW;IAAU;IAClE;IAAa;IAAS;IAAU;IAAS;IAAS;IAAY;IAAQ;IACtE;IAAW;IAAW;IAAY;IAAQ;IAAU;IAAW;IAC/D;IAAW;IAAU;IAAS;IAAS;IAAW;IAAa;IAC/D;IAAW;IAAS;IAAgB;IAAc;IAAiB;IACnE;IAAW;IAAe;IAAU;IAAS;CAC9C;AAKM,MAAM,0BAA0B,CAAC;IACtC,OAAO,eAAe,MAAM,CAAC,CAAA,UAAW,QAAQ,UAAU,KAAK;AACjE;AAEO,MAAM,yBAAyB,CAAC;IACrC,OAAO,eAAe,IAAI,CAAC,CAAA,UAAW,QAAQ,KAAK,KAAK,eAAe;AACzE;AAKO,MAAM,sBAAsB,CAAC;IAClC,OAAO,uBAAuB,IAAI,CAAC;AACrC;AAEO,MAAM,oBAAoB,CAAC;IAChC,IAAI,MAAM,UAAU,CAAC,MAAM;QACzB,OAAO,SAAS,MAAM,KAAK,CAAC;IAC9B;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Works/Kongoni%20website/kongonitechnical/src/app/api/contacts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { insertContactSchema } from \"@shared/schema\";\r\nimport type { InsertContact } from \"@shared/schema\";\r\nimport nodemailer from \"nodemailer\";\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n\r\n    // ✅ Validate the request body using Zod schema\r\n    const validatedData: InsertContact = insertContactSchema.parse(body);\r\n    const { name, email, subject, message } = validatedData;\r\n\r\n    // ✅ Configure Nodemailer transporter\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: \"trimkodak@gmail.com\",\r\n        pass: process.env.GMAIL_APP_PASSWORD, // 🔐 Store securely in .env.local\r\n      },\r\n    });\r\n\r\n    // ✅ Send email to admin\r\n    await transporter.sendMail({\r\n      from: `\"KTVC Contact Form\" <${email}>`,\r\n      to: \"trimkodak@gmail.com\",\r\n      subject: `New Contact Message: ${subject}`,\r\n      text: `\r\n        Name: ${name}\r\n        Email: ${email}\r\n        Subject: ${subject}\r\n        Message: ${message}\r\n      `,\r\n    });\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        message: \"Contact form submitted and email sent successfully\",\r\n        data: validatedData,\r\n      },\r\n      { status: 200 }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Contact API error:\", error);\r\n\r\n    if (error instanceof Error && error.name === \"ZodError\") {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          message: \"Validation error\",\r\n          errors: error,\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        message: \"Internal server error\",\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;AAEA;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,+CAA+C;QAC/C,MAAM,gBAA+B,mHAAA,CAAA,sBAAmB,CAAC,KAAK,CAAC;QAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG;QAE1C,qCAAqC;QACrC,MAAM,cAAc,iJAAA,CAAA,UAAU,CAAC,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM;gBACN,MAAM,QAAQ,GAAG,CAAC,kBAAkB;YACtC;QACF;QAEA,wBAAwB;QACxB,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC;YACtC,IAAI;YACJ,SAAS,CAAC,qBAAqB,EAAE,SAAS;YAC1C,MAAM,CAAC;cACC,EAAE,KAAK;eACN,EAAE,MAAM;iBACN,EAAE,QAAQ;iBACV,EAAE,QAAQ;MACrB,CAAC;QACH;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;YACT,MAAM;QACR,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,IAAI,iBAAiB,SAAS,MAAM,IAAI,KAAK,YAAY;YACvD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,SAAS;gBACT,QAAQ;YACV,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}